import{H as _e,I as Te,u as Se,q as U,E as W,g as p,y as de,J as xe,_ as Ce,o as k,c as w,w as x,K as Pe,a as r,L as ue,v as I,t as V,M as ie,F as G,r as Q,h as z,n as P,O as ce,p as Ee,b as Ie,Q as Me}from"./index-ClVDzDPP.js";function Oe(i){return _e()?(Te(i),!0):!1}function Ae(i){return typeof i=="function"?i():Se(i)}const Be=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function ve(i){var y;const v=Ae(i);return(y=v==null?void 0:v.$el)!=null?y:v}const Ve=Be?window:void 0;function ze(){const i=p(!1),y=xe();return y&&de(()=>{i.value=!0},y),i}function Fe(i){const y=ze();return U(()=>(y.value,!!i()))}function Re(i,y,v={}){const{window:b=Ve,...$}=v;let E;const F=Fe(()=>b&&"ResizeObserver"in b),A=()=>{E&&(E.disconnect(),E=void 0)},M=U(()=>Array.isArray(i)?i.map(R=>ve(R)):[ve(i)]),O=W(M,R=>{if(A(),F.value&&b){E=new ResizeObserver(y);for(const B of R)B&&E.observe(B,$)}},{immediate:!0,flush:"post"}),_=()=>{A(),O()};return Oe(_),{isSupported:F,stop:_}}const X=i=>(Ee("data-v-94ab33f8"),i=i(),Ie(),i),je={key:0,class:"font-bold mt-5 text-5 position-relative border-b-solid border-1 border-gray-1 pb-3"},He=["src"],Le={key:0,class:"flex justify-center"},We={class:"font-bold"},Ue={class:"flex"},$e={class:"font-bold mr-auto"},qe=X(()=>r("p",{class:"font-bold"},"排除追蹤中",-1)),De={class:"switch mt-3"},Ke=X(()=>r("div",{class:"slider round"},null,-1)),Ge={class:"flex flex-wrap",id:"totheTop"},Ne={class:"flex box-border border-black border-1.5 border-solid bg-white rd-5 mt-5 cursor-pointer shadow w-100%"},Je=X(()=>r("h3",{class:"ml-2"},"全選",-1)),Qe=["onClick"],Xe=["onUpdate:modelValue"],Ye=["src","alt"],Ze={class:"flex align-center flex-wrap"},et=["onClick"],tt=["src"],lt=["innerHTML","onClick"],at={class:"imgParentContainer list-none w-100%",style:{display:"flex","justify-content":"center"}},nt={class:"imgParentContainer w-275px",style:{"margin-left":"-40px"}},st={href:"#totheTop"},ot=["disabled"],rt={class:"flex"},ut=["type","onClick"],it={href:"#totheTop"},ct=["disabled"],vt={__name:"MenuTable",props:{searchBox:{type:Boolean,default:!1},traceded:{type:Boolean,default:!1},data:{type:Array,required:!0},contentDirection:{type:String,default:"horizontal"},columns:{type:Object,required:!0},chk:{type:Boolean},boxStyle:{type:Object},boxClass:{type:String},errorImg:{type:String},pagination:{type:Object}},emits:["itemClick","buttonClick","selectedItem"],setup(i,{emit:y}){var re;const v=p([]),b=p([]),$=p(!0),E=p(null),F=p(null),A=p(),M=p(),O=p(),_=p([]),R=p([]),B=p([]),n=i,q=y,d=p(((re=n.pagination)==null?void 0:re.defaultPage)||1),h=p([]),T=p([]),D=U(()=>{var e,a;return Array.from({length:Math.ceil(((e=n.pagination)==null?void 0:e.total)/((a=n.pagination)==null?void 0:a.numberPerPage))},(s,o)=>o+1)}),pe=e=>{d.value=e.pages,g.value?h.value=L():h.value=j(),T.value=C(h.value)},Y=(e,a,s)=>e.filter((o,t)=>(a-1)*s<=t&&t<=a*s-1),N=e=>{var a;b.value=Y(v.value,e,(a=n.pagination)==null?void 0:a.numberPerPage)},Z=e=>{if(e===1||e===D.value.length||e===d.value||e===d.value-1||e===d.value+1)return e="thisPage";if(e<=d.value-1)return e="startElli";if(e>=d.value+1)return e="endElli"},he=()=>{d.value>1&&(d.value-=1,g.value?(h.value=L(),T.value=C(h.value)):(h.value=j(),T.value=C(h.value)))},ge=()=>{d.value<D.value.length&&(d.value+=1,g.value?(h.value=L(),T.value=C(h.value)):(h.value=j(),T.value=C(h.value)))},j=()=>D.value.map(e=>({pages:e,type:Z(e)})),C=e=>{const a=[],s=e==null?void 0:e.filter(l=>l.type==="startElli")[0],o=e.filter(l=>l.type==="thisPage"),t=e.filter(l=>l.type==="endElli")[0];return s!==void 0&&a.push(s),a.push(...o),t!==void 0&&a.push(t),a.sort((l,c)=>l.pages-c.pages),a},fe=U(()=>E.value>390?"w-100% h-95% rd-5":"w-100% h-85px rd-5"),be=e=>{e.target.src=n.errorImg},ee=e=>{const a={};return n.columns.forEach(s=>{const{field:o,type:t}=s;switch(t){case"mainTitle":a[o]=e.mainTitle;break;case"subTitle":a[o]=e.subTitle;break;case"hashtag":a[o]=e.hashtag;break;case"image":a[o]=e.image;break}}),e={...e},delete e.mainTitle,delete e.subTitle,delete e.image,delete e.hashtag,{...e,...a}},te=e=>e.filter(s=>s.chk===!0).map(s=>{const o={};n.columns.forEach(l=>{const{field:c,type:u}=l;switch(u){case"mainTitle":o[c]=s.mainTitle;break;case"subTitle":o[c]=s.subTitle;break;case"hashtag":o[c]=s.hashtag;break;case"image":o[c]=s.image;break}});const t={...s};return delete t.mainTitle,delete t.subTitle,delete t.image,delete t.hashtag,{...t,...o}}),ye=e=>{q("itemClick",ee(e))},le=(e,a)=>{e.preventDefault(),q("buttonClick",ee(a))},S=p({mainTitleStyle:{},subTitleStyle:{},hashtagStyle:{},imageStyle:{},buttonStyle:{},buttonSlot:{}}),K=p(),ae=["mainTitle","subTitle","hashtag","image","button"],ne=(e,a)=>{const s={};return a.map(o=>s[o]=e.find(t=>t.type===o)),s},se=(e,a)=>{var s,o,t,l,c,u;return e.mainTitleStyle={...((s=a.mainTitle)==null?void 0:s.style)||{}},e.subTitleStyle={...((o=a.subTitle)==null?void 0:o.style)||{}},e.hashtagStyle={...((t=a.hashtag)==null?void 0:t.style)||{}},e.imageStyle={...((l=a.image)==null?void 0:l.style)||{}},e.buttonStyle={...((c=a.button)==null?void 0:c.style)||{}},e.buttonSlot={...((u=a.button)==null?void 0:u.slot)||{}},e};de(()=>{Re(F.value,l=>{E.value=l[0].contentRect.width}),K.value=ne(n.columns,ae),se(S.value,K.value),_.value=n.columns.map(l=>l.type),R.value=n.columns.map(l=>l.field);const e=_.value.filter(l=>l==="mainTitle").length,a=_.value.filter(l=>l==="subTitle").length,s=_.value.filter(l=>l==="hashtag").length,o=_.value.filter(l=>l==="image").length;B.value=_.value.filter(l=>l==="button").length;const t=_.value.filter(l=>l!=="image"&&l!=="subTitle"&&l!=="mainTitle"&&l!=="hashtag"&&l!=="button").length;(e>1||a>1||o>1||s>1||B.value>1||t>=1)&&(console.error("columnsType Error"),$.value=!1)}),W(()=>n.data,()=>{v.value=[],console.log(v.value,"datarowpaged.value"),h.value=j(),T.value=C(h.value);const e=Object.keys(n.data[0]),a=n.columns.map(l=>l.field),s=e.filter(l=>!a.includes(l)),o=[];n.data.forEach((l,c)=>{const u={};s.forEach(m=>{u[m]=l[m]}),o[c]=u});const t={};n.columns.forEach(l=>{const{field:c,type:u}=l,m=n.data.map(we=>we[c]);switch(u){case"mainTitle":t.mainTitle=m;break;case"subTitle":t.subTitle=m;break;case"hashtag":t.hashtag=m;break;case"image":t.image=m;break}});for(const l in t)if(Object.hasOwnProperty.call(t,l)){const c=t[l];for(let u=0;u<n.data.length;u++)v.value[u]||(v.value[u]={}),v.value[u][l]=c[u]}v.value=v.value.map((l,c)=>({...l,...o[c],chk:!1})),b.value=[...v.value],A.value=b.value.filter(({traced:l})=>l===!0).length,n.pagination&&N(d.value),g.value&&(f.value=[],v.value.forEach(l=>{var c,u;((c=l.mainTitle)!=null&&c.includes(g.value)||(u=l.subTitle)!=null&&u.includes(g.value))&&(f.value.push(l),M.value&&(f.value=f.value.filter(m=>m.traced===!1))),O.value=f.value.length}),n.pagination?(J(d.value),h.value=L(),T.value=C(h.value)):b.value=f.value)},{deep:!0}),W(()=>n.columns,()=>{K.value=ne(n.columns,ae),se(S.value,K.value)},{deep:!0,immediate:!0}),W(()=>d.value,()=>{n.pagination&&!g.value?N(d.value):J(d.value)},{deep:!0});const H=p(!1),g=p(""),f=p([]),me=()=>{g.value?f.value.forEach(e=>{e.chk=H.value}):v.value.forEach(e=>{e.chk=H.value}),q("selectedItem",te(v.value))},ke=()=>{q("selectedItem",te(v.value))},J=e=>{var a;b.value=Y(f.value,e,(a=n.pagination)==null?void 0:a.numberPerPage)},oe=U(()=>{var e;return Array.from({length:Math.ceil(f.value.length/((e=n.pagination)==null?void 0:e.numberPerPage))},(a,s)=>s+1)}),L=()=>oe.value.map(e=>({pages:e,type:Z(e)}));return W([g,M],(e,a)=>{e!==a&&(H.value=!1,d.value=1,g.value?(f.value=[],v.value.forEach(s=>{var o,t;((o=s.mainTitle)!=null&&o.includes(g.value)||(t=s.subTitle)!=null&&t.includes(g.value))&&(f.value.push(s),M.value&&(f.value=f.value.filter(l=>l.traced===!1))),O.value=f.value.length}),n.pagination?(J(d.value),h.value=L(),T.value=C(h.value)):b.value=f.value):(b.value=v.value,n.pagination&&(N(d.value),h.value=j(),T.value=C(h.value),b.value.forEach(s=>{const o=v.value.find(t=>t.mainTitle===s.mainTitle);o&&(o.chk=s.chk)}))))}),(e,a)=>{var s,o;return k(),w(G,null,[n.searchBox?(k(),w("div",je,[x(r("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>g.value=t),class:"w-100% listinput bg-#F5F5F5 border-none py-5",placeholder:"請輸入"},null,512),[[Pe,g.value]]),r("img",{src:e.SearchOutline,alt:"",srcset:"",class:"position-absolute top-5 right-5 w-25px"},null,8,He)])):ue("",!0),x(r("div",null,[!g.value&&A.value?(k(),w("div",Le,[r("p",We,V(`${A.value}人追蹤中`),1)])):ue("",!0),x(r("div",Ue,[r("p",$e,V(`${O.value}筆搜尋結果`),1),qe,r("label",De,[r("input",{type:"checkbox",onClick:a[1]||(a[1]=()=>M.value=!M.value)}),Ke])],512),[[I,g.value]])],512),[[I,n.traceded]]),r("div",Ge,[x(r("div",Ne,[x(r("input",{type:"checkbox",class:"w-5 ml-5","onUpdate:modelValue":a[2]||(a[2]=t=>H.value=t),onChange:me},null,544),[[ie,H.value]]),Je],512),[[I,n.chk]]),(k(!0),w(G,null,Q(b.value,(t,l)=>{var c;return x((k(),w("div",{class:z(["rd-5 mt-5 w-100%",n.boxClass]),style:P(n.boxStyle),key:l,onClick:u=>ye(t)},[r("div",{class:"flex flex-wrap w-100% h-100% relative",ref_for:!0,ref_key:"el",ref:F},[x(r("input",{type:"checkbox","onUpdate:modelValue":u=>t.chk=u,class:"w-5 ml-5",onChange:ke},null,40,Xe),[[I,n.chk],[ie,t.chk]]),x(r("div",{class:z(["p-2 imgParentContainer",t.hasOwnProperty("image")&&t.image!==void 0?n.contentDirection==="horizontal"?"w-28%":"w-100%":"w-0"])},[r("img",{src:t.image,alt:n.errorImg,class:z(fe.value),onError:be,style:P(S.value.imageStyle||null)},null,46,Ye)],2),[[I,!n.chk&&t.hasOwnProperty("image")]]),r("div",{class:z(n.contentDirection==="horizontal"?"w-62%":"w-100%")},[r("div",{class:"ml-2 text-4.5",style:P(S.value.mainTitleStyle||null)},V(t==null?void 0:t.mainTitle),5),r("p",{class:z(["ml-2 text-3.2",n.chk?"pt--1":"mt--2"]),style:P(S.value.subTitleStyle)},V(t==null?void 0:t.subTitle),7),r("div",Ze,[(k(!0),w(G,null,Q((c=b.value[l])==null?void 0:c.hashtag,(u,m)=>(k(),w("p",{key:m,class:"bg-#C1430D py-1 px-2 mr-2 rd-8 text-3.5 text-white mt--4px",style:P(S.value.hashtagStyle||null)},V(u),5))),128))])],2),Object.keys(S.value.buttonSlot).length===0?(k(),w("div",{key:0,class:"w-10% absolute top-11 right-1 cursor-pointer",style:P(S.value.buttonStyle),onClick:ce(u=>le(u,t),["stop"])},[x(r("img",{src:e.trushIcon,alt:"",srcset:""},null,8,tt),[[I,B.value===1]])],12,et)):(k(),w("button",{key:1,innerHTML:S.value.buttonSlot.default(t),style:P(S.value.buttonStyle.default(t)),onClick:ce(u=>le(u,t),["stop"])},null,12,lt))],512)],14,Qe)),[[I,$.value]])}),128))]),x(r("ul",at,[r("div",nt,[r("a",st,[r("button",{disabled:d.value===1,onClick:he,class:"menuTableBtnStyle cursor-pointer mr-1",style:P((s=n.pagination)==null?void 0:s.btnStyle)}," < ",12,ot)]),r("div",rt,[(k(!0),w(G,null,Q(T.value,(t,l)=>(k(),w("a",{href:"#totheTop",key:l,class:z(["mx-1 px-1.5 py-2 cursor-pointer select-none font-bold text-3.8 w-100% text-center overflow-hidden decoration-none",t.pages===d.value?"color-white  bg-#DC6A29 rd-1":"color-gray"]),type:t.type,onClick:()=>pe(t)},V(t.type==="thisPage"?t.pages:"..."),11,ut))),128))]),r("a",it,[r("button",{disabled:g.value?d.value>=oe.value.length:d.value>=D.value.length,onClick:ge,class:"menuTableBtnStyle cursor-pointer ml-1",style:P((o=n.pagination)==null?void 0:o.btnStyle)}," > ",12,ct)])])],512),[[I,n.pagination]])],64)}}},pt=Ce(vt,[["__scopeId","data-v-94ab33f8"]]),ht=Me("workIntro",()=>(p(),{test:p([{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"},{label:"禮盒",img:"/work1.png",sort:"1"},{label:"提袋",img:"/work1.png",sort:"2"}])}));export{pt as M,ht as u};
