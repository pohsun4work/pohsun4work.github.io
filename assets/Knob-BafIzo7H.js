import{_ as z}from"./Knob.vue_vue_type_style_index_0_scoped_b8894ed7_lang-BilKL6nt.js";import{d as V,m as g,f as I,g as P,h as w,k as _,s as F,D as S,o as p,c as k,a as h,t as C,z as D,A as E,u as B}from"./index-DmE6Qz1C.js";function A(...a){let l,t,e,o;typeof a[2]=="function"?[l,t,e,o]=a:(l=window,[t,e,o]=a);let r,u;o!==void 0&&({lazy:u,...r}=o);let s=null;const i=c=>{u!==void 0?(s!==null&&clearTimeout(s),s=setTimeout(()=>e(c),u*1e3)):e(c)};return l.addEventListener(t,i,r),()=>l.removeEventListener(t,i)}const K=(a,l,t)=>{const e={x:l.x-a.x,y:l.y-a.y},o={x:t.x-a.x,y:t.y-a.y},r=e.x*o.x+e.y*o.y,u=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.sqrt(o.x*o.x+o.y*o.y),c=Math.acos(r/(u*s))*(180/Math.PI);return e.x*o.y-e.y*o.x>=0?c:360-c},U=["width","height"],q=["r","cx","cy","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],L={class:"knob_text"},R=V({__name:"Knob",props:g({minValue:{default:0},maxValue:{default:100},startPosition:{default:0},innerColor:{default:"#FFFFFF"},outerColor:{default:"#009688"},innerSize:{default:"80px"},outerSize:{default:"100px"}},{modelValue:{default:0},modelModifiers:{}}),emits:g(["whileMax"],["update:modelValue"]),setup(a,{emit:l}){I(n=>({"5b8fc322":u.value,e88e0074:n.innerSize,"2aefef84":n.innerColor}));const t=a,e=P(a,"modelValue"),o=l,r=w(),u=_(()=>`${-90+t.startPosition}deg`),s=_(()=>{var n;return((n=r.value)==null?void 0:n.offsetWidth)??0});let i=!1;const c=()=>i=!0,x=()=>i=!1,M=n=>{if(!i)return;const d=n,f={x:s.value/2,y:s.value/2},v={x:s.value/2,y:0},b={x:d.offsetX,y:d.offsetY};let m=(K(f,v,b)-t.startPosition)/360;m<0&&(m=1+m);const y=Math.ceil((t.maxValue-t.minValue)*m)+t.minValue;return y===t.maxValue&&o("whileMax"),e.value=y};return F(()=>{e.value=e.value<(t.minValue??0)?t.minValue??0:e.value;const d=[{e:"mousedown",fn:c},{e:"mouseup",fn:x},{e:"mousemove",fn:M}].map(({e:f,fn:v})=>A(r.value,f,v));S(()=>d.forEach(f=>f()))}),(n,d)=>(p(),k("div",{class:"knob",style:D({width:n.outerSize,height:n.outerSize})},[(p(),k("svg",{width:s.value,height:s.value,xmlns:"http://www.w3.org/2000/svg",class:"knob__svg"},[h("circle",{r:s.value/4,cx:s.value/2,cy:s.value/2,fill:"transparent",stroke:n.outerColor,"stroke-width":s.value/2,"stroke-dasharray":s.value/2*Math.PI,"stroke-dashoffset":s.value/2*Math.PI*(1-(e.value-n.minValue)/(n.maxValue-n.minValue))},null,8,q)],8,U)),h("div",L,C(e.value),1),h("div",{ref_key:"knob",ref:r,class:"knob__div",style:{width:"100%",height:"100%"}},null,512)],4))}}),T=z(R,[["__scopeId","data-v-b8894ed7"]]),O=V({__name:"Knob",setup(a){const l=w(30);return(t,e)=>(p(),E(B(T),{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),"min-value":50,"max-value":150,"inner-color":"#D6F896","outer-color":"#000000","outer-size":"150px","inner-size":"100px","start-position":45},null,8,["modelValue"]))}});export{O as default};
